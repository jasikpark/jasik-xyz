[build]
publish = "public/"
command = "hugo"

[build.environment]
HUGO_ENV = "production"

[dev]
command = "hugo server --cleanDestinationDir --disableFastRender"
autoLaunch = false

[context.branch-deploy]
command = "hugo -D --buildFuture --buildDrafts -b $DEPLOY_PRIME_URL"

[context.v1]
command = "hugo -b https://v1.jasik.xyz"

[context.v2]
command = "hugo -b https://v2.jasik.xyz"

[context.deploy-preview]
command = "hugo -b $DEPLOY_PRIME_URL"

[[redirects]]
from = "/donate/"
to = "https://ko-fi.com/calebjasik/"

[[redirects]]
from = "/resume"
to = "/caleb-jasik-resume.pdf"

[[redirects]]
from = "/resume.pdf"
to = "/caleb-jasik-resume.pdf"

[[redirects]]
from = "https://jasik-xyz.netlify.com/*"
to = "https://jasik.xyz/:splat"
status = 301
force = true

[[redirects]]
from = "https://jasik-xyz.netlify.app/*"
to = "https://jasik.xyz/:splat"
status = 301
force = true

[[redirects]]
from = "/payment/*"
to = "/pay/:splat"
status = 301

[[redirects]]
from = "/pay/*"
query = { note = ":note" }
to = "https://venmo.com/calebjasik?txn=pay&amount=:splat&note=:note"

[[redirects]]
from = "/pay/*"
to = "https://venmo.com/calebjasik?txn=pay&amount=:splat"
status = 302
